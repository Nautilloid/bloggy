<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" type="image/png" href="//localhost:1313/favicon.ico" />
<meta property="og:url" content="//localhost:1313/lab/setting-up-de-blog/setting-up-de-blog/">
  <meta property="og:site_name" content="Rich told me to blog">
  <meta property="og:title" content="Setting up bloggy">
  <meta property="og:description" content="Technologies
Ubuntu Server &gt; Nginx &gt; Git &gt; Hugo &gt; Obsidian &gt; Unifi
Note: Before starting this please consider that if you’d like to have screenshots in your blog you need to have a path from your .md file to the location of the .png. To simplify this when I create a markdown file for a blog post I create folder first that will hold all of the content. I wish I’d know to do this from the start.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="lab">
    <meta property="article:published_time" content="2025-05-02T16:06:04+01:00">
    <meta property="article:modified_time" content="2025-05-02T16:06:04+01:00">

<title>Rich told me to blog | Setting up bloggy</title>

    <link rel="stylesheet" href="/css/main.css">
  
      <link rel="stylesheet" href="/css/palette/catpuccin.css">

      <script src="/js/main.js"></script>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

</head>

  
<body
    class="dark"
>
  
  <main>
    
  <div class="container pt-5">
    <div class="row mt-5 pt-5">
      
  <nav aria-label="breadcrumb" class="small">
    <ol class="breadcrumb fw-bold">
    <li class="breadcrumb-item">
      <a href="/"
        
      >home</a>
      
    </li>
    <li class="breadcrumb-item">
      <a href="/lab"
        class="text-decoration-underline link-offset-3"
        
      >lab</a>
      
    </li>
    <li class="breadcrumb-item">
      <a href="/dvwa"
        
      >dvwa</a>
      
    </li>
    <li class="breadcrumb-item">
      <a href="https://github.com/Nautilloid"
        
          target="_blank" rel="noopener noreferrer"
        
      >github</a>
      
    </li>
    <li class="breadcrumb-item">
      <a href="/"
        
      >about</a>
      
    </li>
    </ol>
  </nav>

    </div>
    
    <div class="post">
      <header class="mb-4">
        <h1 class="text-uppercase">Setting up bloggy</h1>
        
        
        <div aria-label="breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item small">
              <time datetime="2025-05-02T16:06:04&#43;01:00">May 2, 2025</time>
            </li>
            <li class="breadcrumb-item small">
              7 minutes
            </li>
          </ol>
        </div>
      </header>
      <article>
        <p><strong>Technologies</strong></p>
<p>Ubuntu Server &gt; Nginx &gt; Git &gt; Hugo &gt; Obsidian &gt; Unifi</p>
<p>Note: Before starting this please consider that if you&rsquo;d like to have screenshots in your blog you need to have a path from your .md file to the location of the .png. To simplify this when I create a markdown file for a blog post I create folder first that will hold all of the content. I wish I&rsquo;d know to do this from the start.</p>
<p><img src="1.png" alt=""></p>
<p><strong>Ubuntu LXC</strong></p>
<p>Create a new Ubuntu container in your VM environment.
I gave my container the IP address: 192.168.1.130, machine number:130, machine name: ct-ubu-blog
This way I can easily find it later when I want to add firewall rules and use the routers DMZ</p>
<p><strong>Nginx</strong></p>
<p>Once you have the CT setup, login and update.</p>
<pre tabindex="0"><code>apt update &amp;&amp; upgrade -y
apt install -y nginx git
systemctl start nginx
systemctl enable nginx
cd /var/www/
</code></pre><p>**[[Hugo]]</p>
<p>When installing Hugo from the apt repository I found that I would install an old version that was incompatible with certain themes. I initially used apt install hugo but then upgraded but using the following:</p>
<p>Find the latest releases here: <a href="https://github.com/gohugoio/hugo/releases">https://github.com/gohugoio/hugo/releases</a>
Because I have an ubuntu container in proxmox running on x86 architecture, I downloaded the hugo_0.145.0_linux-amd64.deb file. The version will most likely be out of date but the commands the same. apt is</p>
<pre tabindex="0"><code>wget https://github.com/gohugoio/hugo/releases/download/v0.145.0/hugo_0.145.0_linux-amd64.deb
dpkg -i hugo_0.145.0_linux-amd64.deb
hugo version
</code></pre><p>Choose a theme from here: <a href="https://themes.gohugo.io/">https://themes.gohugo.io/</a></p>
<p>On this occasion I chose not-much
<a href="https://github.com/imgios/not-much/tree/main">https://github.com/imgios/not-much/tree/main</a>
Read the README.md first: <a href="https://github.com/imgios/not-much/blob/main/README.md">https://github.com/imgios/not-much/blob/main/README.md</a></p>
<p><strong>Important lessons</strong></p>
<ul>
<li>Structure you .md files the right way from the start to make them clean and clean</li>
<li>Inserting images is easy if you know how from the beginning.</li>
<li>understand the difference between a list and single pages.</li>
<li>Straying from the theme page structure is difficult, use LLM&rsquo;s</li>
<li>Understand front matter in the index.md and _index.md files</li>
<li>Sometimes its pertinent to rebuild the entire site using the &ndash;disableFastRender option</li>
<li>If you&rsquo;re using a remote headless server use the bind option</li>
</ul>
<p><code>hugo server --disableFastRender  --bind 192.168.1.130 --baseURL http://192.168.1.130  -D</code></p>
<p>This command will host a server on your server IP(192.168.1.130), port 1313. It will render the page from scratch and show any draft posts.</p>
<p>Lets begin:</p>
<p>Make sure you&rsquo;re in your blog folder /var/www/</p>
<pre tabindex="0"><code>hugo new site bloggy
cd bloggy/
git init
git pull https://github.com/imgios/not-much.git themes/not-much
</code></pre><p>Add this to the hugo.toml file</p>
<pre tabindex="0"><code>theme = &#39;not-much&#39;
</code></pre><p>Take a look through the README.md . It should show you some of the layout options. I used the example they offered but its pretty easy to change the colour schemes.</p>
<p>![[Screenshot 2025-05-02 at 10.15.23 am.png]]</p>
<p>I copied the contents of the themes/not-much/examplesite/config.toml file and put it in the hugo.toml file in your blogs root directory. That gave me the look and feel of the site.</p>
<p>These was some messing about with the hugo.toml file and the layout/<new folder>/list.html files in order to change the menu/list options.</p>
<p>![[Screenshot 2025-05-02 at 3.33.43 pm.png]]</p>
<p>![[Screenshot 2025-05-02 at 3.35.49 pm.png]]</p>
<p>**[[Backup]]</p>
<p>Maybe, just maybe, this would be a good time to backup the container. Brilliant idea if you think you might fuck up, which I did multiple times.</p>
<p>![[Screenshot 2025-04-21 at 11.30.53 am.png]]</p>
<p><strong>File Structure and Images</strong></p>
<p>It&rsquo;s extremely important to understand this before going to far. In the [[Obsidian]] section below I explain how to manage this file system.</p>
<p><strong>[[Git]]</strong></p>
<p>Version control is important. Git is a solution that integrates well with other applications. You&rsquo;ll need to input your github account details. If you don&rsquo;t have one, create and account and do some online tutorials.
While in the your blog root directory, run the following commands.</p>
<pre tabindex="0"><code>git init
git config --global user.name &#34;your_git_username&#34;
git config --global user.email &#34;your_email@email.com&#34;
</code></pre><p>Make a test file test.txt with some text and did a git add/commit</p>
<pre tabindex="0"><code>git add . #this will add all changes to the commit list
git commit -m &#34;test&#34; #commits to the current branch, -m will add a comment
</code></pre><p>![[Screenshot 2025-03-27 at 2.53.12 pm.png]]</p>
<p>Then I push test.txt file to github.</p>
<pre tabindex="0"><code>git push origin main
</code></pre><p>You will be prompted for a username AND password.
The password being asked for here is a token from the github settings &gt; developer &gt; personal access tokens. Generate a classic token. When prompted for a password paste in the token.</p>
<p>![[Screenshot 2025-03-27 at 2.30.57 pm.png]]</p>
<p>![[Screenshot 2025-03-27 at 2.37.27 pm.png]]</p>
<p>![[Screenshot 2025-03-27 at 2.40.16 pm.png]]</p>
<p>The test file is now in my github account: <a href="https://github.com/Nautilloid/blogy">https://github.com/Nautilloid/blogy</a></p>
<p>![[Screenshot 2025-03-27 at 2.41.45 pm.png]]</p>
<p><strong>[[Obsidian]]</strong></p>
<p>I&rsquo;m going to use Obsidian to write my .md files. Obsidian is fantastic for note taking, there may be better apps but this one is brilliant.</p>
<p>Important notes:
When setting up your folder structure you need to have the image files in the same folder. This makes everything a lot easier when using git and hugo. Hugo will automatically find the files if they are in either the static folder or the same folder as the .md file.
![[Screenshot 2025-04-28 at 11.59.21 am.png]]</p>
<p>These will also need to be renamed. The syntax looks like this:</p>
<p><code>![image](image1.png)</code>
or: <code>![](image1.png)</code></p>
<p>This files names in the directory need to be renamed also. Hugo wont interpret the file names correctly if there are full stops, spaces and slashes. Better the keep the filenames simple.
<a href="https://gohugo.io/getting-started/directory-structure/">https://gohugo.io/getting-started/directory-structure/</a></p>
<p>![[Screenshot 2025-04-28 at 11.50.07 am.png]]</p>
<p>I renamed the markdown file to index.md, and added the [[Front Matter]]</p>
<p>![[Screenshot 2025-05-02 at 4.03.15 pm.png]]</p>
<p>Hugo uses toml, yaml and json for configuration. In the .md file it can be used to for the heading and metadata. In content &gt; posts &gt; postname &gt; put your blog content or rename and add the metadata to the index.md file.</p>
<p>![[Screenshot 2025-04-28 at 12.55.31 pm.png]]</p>
<p>After doing this I suggest you rebuild the whole site and hard refresh your browser.</p>
<pre tabindex="0"><code>hugo server --disableFastRender  --bind 192.168.1.130 --baseURL http://192.168.1.130  -D
</code></pre><p><code> shift + command + r</code></p>
<p><strong>Workflow for MacOS</strong></p>
<p>Now that the site is ready I need to work on the content. Formatting and file system setup seems to be much easier from my Mac.</p>
<p>Build content on the mac, push it to github, pull it down to the server.</p>
<p>Create a blog folder &gt; Install git &gt; pull /Nautilloid/bloggy &gt; move new content to bloggy folder &gt; edit in vs code for images &gt; push to github</p>
<p>In the terminal</p>
<pre tabindex="0"><code>mkdir bloggy
brew install git hugo
git pull https://github.com/Nautilloid/bloggy.git
</code></pre><p>Add some content to your bloggy/content/posts(lab,dvwa for me because I changed the menu items)</p>
<p>Name the fold the name of the blog post and the content as index.md with the screenshots/images as <img src="image1.png" alt="">. Add your front matter.</p>
<p>Check what it looks like with the command</p>
<pre tabindex="0"><code>hugo server -D 
</code></pre><p><strong>[[Self-hosting]]</strong></p>
<p>Self-host a secure via https
Hypervisor: Proxmox
VM OS: Ubuntu
Blog: Hugo
Web Server: Nginx
Domain: driverive.com.au
Domain Registrar: GoDaddy
NO-IP DDNS-hostname: driverive.ddns.net
Router: Unifi</p>
<p>We need to point the domain to our server via the no-ip ddns.
using dns a/cname records, when someone enters driverevice.com.au the dns record will point to driverevive.ddns.net.  A nslookup will show that my dynamic IP associated with the no-ip hostname.</p>
<p>Once you have set up an account with no-ip and added the ddns to your router will update the ip address no-ip when it changes.</p>
<p>![[Screenshot 2025-05-03 at 7.31.13 pm.png]]</p>
<p>Create a hostname to link between the IP and the domain name.</p>
<p>![[Screenshot 2025-05-03 at 7.27.40 pm.png]]</p>
<p>Change the A and CNAME records for your domain.</p>
<p>![[Screenshot 2025-05-03 at 7.27.27 pm.png]]</p>
<p>In Summary:</p>
<p><strong>External user</strong> goes to <code>home.driverevive.com.au</code>.</p>
<p>DNS resolves it to your public IP (via No-IP/DDNS).</p>
<p>Firewall receives request on port <code>443</code>.</p>
<p>Your UniFi firewall <strong>port forwards</strong> that request to <code>192.168.20.10</code> (your web server).</p>
<p>The server replies back, and your router NATs the response.</p>
<p>Now we need to set up out firewall rules. I have made a VLAN 192.168.40.0/24.</p>
<p>![[Screenshot 2025-05-03 at 7.53.41 pm.png]]</p>
<p>Now I will change the ip address of the container to 192.168.40.130.</p>
<p>![[Screenshot 2025-05-03 at 7.58.45 pm.png]]</p>
<p>Now for some basic hardening.</p>
<pre tabindex="0"><code>apt install fail2ban -y
</code></pre><p>![[Screenshot 2025-05-03 at 8.59.41 pm.png]]</p>
<p>![[Screenshot 2025-05-03 at 8.59.57 pm.png]]</p>
<pre tabindex="0"><code>ufw allow 80
ufw allow 443
ufw enable
</code></pre><p>![[Screenshot 2025-05-03 at 9.02.03 pm.png]]</p>
<hr>
<p>Setup Nginx for https only</p>
<p>vim /etc/nginx/sites-available/driverrevive</p>
<pre tabindex="0"><code class="language-server" data-lang="server">server {
        listen 80;
        server_name driverrevive.com.au www.driverrevive.com.au;
        return 301 https://$host$request_uri; 
}

server {
        listen 443 ssl;
        server_name driverrevive.com.au www.driverrevive.com.au;

        root /var/www/html;
        index index.html;
        ssl_certificate /etc/letsencrypt/live/driverrevive.com.au/fullchain.pem;        ssl_certificate_key /etc/letsencrypt/live/driverrevive.com.au/privkey.pem;
        include /etc/letsencrypt/options-ssl-nginx.conf;
        ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;
        add_header Strict-Transport-Security &#34;max-age=31536000; includeSubDomains&#34; always; 

        location / {
        try_files $uri $uri/ =404;
        }
}
</code></pre><pre tabindex="0"><code>ln -s /etc/nginx/sites-available/driverrevive /etc/nginx/sites-enabled/
nginx -t
systemctl reload nginx
</code></pre>
      </article>
      

      <div class="row">
    <div class="col-md">
        
        <a href="//localhost:1313/lab/goad/">
            <span>previous: </span>
            <span>GOAD Setup</span>
        </a>
        
    </div>
    <div class="col-md text-md-end">
        
    </div>
</div>
    </div>
  </div>
  <footer>
    <div class="container mt-4 pb-1">
    <p class="small opacity-75">
        take what you need © 2025
        
        // powered by <a href="https://gohugo.io/">hugo</a> and <a href="https://github.com/imgios/not-much">imgios/not-much</a>
        
    </p>
</div>

  </footer>

  </main>

  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>
